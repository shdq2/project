<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Wish">

	<select id="selectLastWishcNo" resultType="int">
		SELECT MAX(wishc_no) FROM wish_chk
	</select>

	<select id="selectLastWishcode" resultType="int">
		SELECT MAX(wish_code) FROM wish
	</select>

	<select id="insertWish" parameterType="WishVO">
		INSERT INTO wish(wish_code, wish_name, wish_phone, wish_start, wish_end, wish_msg, wish_region, wish_price, wish_date, wish_number, wish_email)
			VALUES(#{wish_code},#{wish_name},#{wish_phone},#{wish_start},#{wish_end},#{wish_msg},#{wish_region},#{wish_price},NOW(),#{wish_number},#{wish_email});
		<foreach item="tmp" collection="list" separator=" ">
			INSERT INTO wish_chk(wishc_no, wishc_title, wishc_date, wish_code)
				VALUES(#{tmp.wishc_no},#{tmp.wishc_title},NOW(),#{wish_code});
		</foreach>
	</select>
	
</mapper>	